(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(8),s=n.n(c),r=n(2),a=n.n(r),o=n(4),u=n(3),i=n(1),l=(n(16),n(17),n(18),n(9)),j=n.n(l),b=(n(19),n(0)),d=function(){return Object(b.jsx)("div",{className:"Loader",children:Object(b.jsx)("div",{className:"Loader__content"})})},m="https://mate.academy/students-api",p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{method:"GET"};return fetch("".concat(m).concat(e),t).then((function(e){if(!e.ok)throw new Error("".concat(e.status," - ").concat(e.statusText));return e.json()}))},f=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=""===t||"0"===t?"/posts":"/posts?userId=".concat(t),e.next=3,p(n);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/posts/".concat(t),e.next=3,p(n);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){var t=e.selectedUser,n=e.selectPost,c=e.selectedPost,s=Object(i.useState)([]),r=Object(u.a)(s,2),l=r[0],m=r[1],p=Object(i.useState)(!0),h=Object(u.a)(p,2),O=h[0],x=h[1];return Object(i.useEffect)((function(){Object(o.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!1),e.next=3,f(t);case 3:n=e.sent,m(n);case 5:case"end":return e.stop()}}),e)})))()}),[t]),Object(b.jsx)("div",{className:"PostsList",children:O?Object(b.jsx)(d,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"Posts:"}),Object(b.jsx)("ul",{className:"PostsList__list",children:l.map((function(e){var t=e.userId,s=e.title,r=e.id;return Object(b.jsxs)("li",{className:"PostsList__item",children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("b",{children:["[User",t,"]:"," "]}),s]}),Object(b.jsx)("button",{type:"button",className:j()({PostsList__button:!0,"PostsList__button--active":c===r,button:!0}),onClick:function(){n(c===r?"0":"".concat(r))},children:c==="".concat(r)?"Close":"Open"})]},r)}))})]})})},x=n(10),v=(n(21),function(e){var t=e.selectedPost,n=e.AddCommentAfterSubmit,c=Object(i.useState)(""),s=Object(u.a)(c,2),r=s[0],a=s[1],o=Object(i.useState)(""),l=Object(u.a)(o,2),j=l[0],d=l[1],m=Object(i.useState)(""),p=Object(u.a)(m,2),f=p[0],h=p[1];return Object(b.jsxs)("form",{className:"NewCommentForm",onSubmit:function(e){e.preventDefault(),n({selectedPost:t,name:r,email:j,body:f}),a(""),d(""),h("")},children:[Object(b.jsx)("div",{className:"form-field",children:Object(b.jsx)("input",{type:"text",name:"name",value:r,placeholder:"Your name",className:"NewCommentForm__input",onChange:function(e){return a(e.target.value)}})}),Object(b.jsx)("div",{className:"form-field",children:Object(b.jsx)("input",{type:"text",name:"email",value:j,placeholder:"Your email",className:"NewCommentForm__input",onChange:function(e){return d(e.target.value)}})}),Object(b.jsx)("div",{className:"form-field",children:Object(b.jsx)("textarea",{name:"body",value:f,placeholder:"Type comment here",className:"NewCommentForm__input",onChange:function(e){return h(e.target.value)}})}),Object(b.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),_=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/comments?postId=".concat(+t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/comments",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/comments/".concat(t),{method:"DELETE"});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=(n(22),function(e){var t=e.selectedPost,n=Object(i.useState)(null),c=Object(u.a)(n,2),s=c[0],r=c[1],a=Object(i.useState)(!0),o=Object(u.a)(a,2),l=o[0],j=o[1],d=Object(i.useState)([]),m=Object(u.a)(d,2),p=m[0],f=m[1];Object(i.useEffect)((function(){h(t).then((function(e){r(e)})),_(t).then((function(e){f(e)})),j(!0)}),[t]);return Object(b.jsxs)("div",{className:"PostDetails",children:[Object(b.jsx)("h2",{children:"Post details:"}),null!==s&&Object(b.jsxs)("section",{className:"PostDetails__post",children:[Object(b.jsx)("p",{children:s.body}),Object(b.jsx)("p",{children:"test"})]}),Object(b.jsxs)("section",{className:"PostDetails__comments",children:[p.length>0&&Object(b.jsx)("button",{type:"button",className:"button",onClick:function(){return j((function(e){return!e}))},children:"".concat(l?"Hide":"Show"," ").concat(p.length," comments")}),l&&Object(b.jsx)("ul",{className:"PostDetails__list",children:p.map((function(e){return Object(b.jsxs)("li",{className:"PostDetails__list-item",children:[Object(b.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){w(e.id),f((function(t){return t.filter((function(t){return t.id!==e.id}))}))},children:"X"}),Object(b.jsx)("p",{children:e.body})]},e.id)}))})]}),Object(b.jsx)("section",{children:Object(b.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(b.jsx)(v,{selectedPost:t,AddCommentAfterSubmit:function(e){N(e).then((function(e){f((function(t){return[].concat(Object(x.a)(t),[e])}))}))}})})})]})}),P=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p("/users"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(i.useState)(""),r=Object(u.a)(s,2),l=r[0],j=r[1],d=Object(i.useState)(""),m=Object(u.a)(d,2),p=m[0],f=m[1];Object(i.useEffect)((function(){Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})))()}),[]);return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("header",{className:"App__header",children:Object(b.jsxs)("label",{htmlFor:"selection_users",children:["Select a user: \xa0",Object(b.jsxs)("select",{className:"App__user-selector",value:l||0,onChange:function(e){return t=e.currentTarget.value,j(t),void f("");var t},children:[Object(b.jsx)("option",{value:"0",id:"selection_users",children:"All users"}),n.map((function(e){return Object(b.jsx)("option",{value:"".concat(e.id),children:e.name},e.id)}))]})]})}),Object(b.jsxs)("main",{className:"App__main",children:[Object(b.jsx)("div",{className:"App__sidebar",children:Object(b.jsx)(O,{selectedUser:l,selectPost:f,selectedPost:p})}),Object(b.jsx)("div",{className:"App__content",children:"0"!==p?Object(b.jsx)(y,{selectedPost:p}):Object(b.jsx)("h2",{children:"Select post to see details"})})]})]})};s.a.render(Object(b.jsx)(S,{}),document.getElementById("root"))}],[[23,1,2]]]);
//# sourceMappingURL=main.05bd8e56.chunk.js.map